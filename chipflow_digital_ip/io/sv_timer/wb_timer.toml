# Wishbone Timer/Counter Configuration
# A simple 32-bit programmable timer with Wishbone B4 interface

name = 'wb_timer'

[files]
path = '.'

[generate]
generator = 'systemverilog'

[generate.sv2v]
top_module = 'wb_timer'

[clocks]
sys = 'clk'

[resets]
sys = 'rst_n'

# Bus interface using auto-inference
# When no explicit 'map' is provided, the wrapper parses the Verilog file
# and matches signal patterns (cyc, stb, ack, etc.) to interface members.
# This works with any naming convention: i_wb_cyc, wb_cyc_i, cyc, etc.
[ports.bus]
interface = 'amaranth_soc.wishbone.Signature'
direction = 'in'

[ports.bus.params]
addr_width = 4
data_width = 32
granularity = 8

# Pin interfaces - simple signals need explicit mapping
# (pattern matching can't reliably infer single-bit signals)
[pins.irq]
interface = 'amaranth.lib.wiring.Out(1)'
map = 'o_irq'

# Software driver configuration for SoftwareDriverSignature
[driver]
regs_struct = 'wb_timer_regs_t'
h_files = ['drivers/wb_timer.h']
