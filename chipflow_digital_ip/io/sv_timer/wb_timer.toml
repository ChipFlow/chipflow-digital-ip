# Wishbone Timer/Counter Configuration
# A simple 32-bit programmable timer with Wishbone B4 interface

name = 'wb_timer'

[files]
path = '.'

[generate]
generator = 'systemverilog'

[generate.sv2v]
top_module = 'wb_timer'

[clocks]
sys = 'clk'

[resets]
sys = 'rst_n'

# Bus interface using auto-mapping
# The 'prefix' field enables automatic signal name generation for known interfaces.
# For Wishbone, this generates: i_wb_cyc, i_wb_stb, i_wb_we, i_wb_sel, i_wb_adr,
#                               i_wb_dat (dat_w), o_wb_dat (dat_r), o_wb_ack
[ports.bus]
interface = 'amaranth_soc.wishbone.Signature'
direction = 'in'
prefix = 'wb'

[ports.bus.params]
addr_width = 4
data_width = 32
granularity = 8

# Pin interfaces using auto-mapping
# For simple Out(1), auto-generates: o_irq
[pins.irq]
interface = 'amaranth.lib.wiring.Out(1)'
prefix = 'irq'

# Software driver configuration for SoftwareDriverSignature
[driver]
regs_struct = 'wb_timer_regs_t'
h_files = ['drivers/wb_timer.h']
